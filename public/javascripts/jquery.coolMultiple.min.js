(function(b){var a={init:function(e){var f=new Date();this.settings={delText:"delete",mode:"select",infotext:"",_id:"coolmulti_"+(f.getTime())};if(e){this.settings=b.extend(this.settings,e)}var c=this;c.hide();c.wrapper=c.parent().append('<div id="'+c.settings._id+'" class="coolmulti clearfix"></div>').find("div#"+c.settings._id);c.div=c.wrapper.append('<div id="'+c.settings._id+'_scrollbox" class="coolmulti-scrollbox"></div>').find("div#"+c.settings._id+"_scrollbox");c.values=c.wrapper.append('<div id="'+c.settings._id+'_values" class="coolmulti-values"></div>').find("div#"+c.settings._id+"_values");if(this.settings.infotext!=""){c.values.append('<div class="coolmulti-infotext">'+this.settings.infotext+"</div>")}if(this.settings.mode=="select"){this.coolMultiple("init_select")}else{if(this.settings.mode=="checkboxes"){this.coolMultiple("init_checkboxes")}}},init_select:function(){var c=this;c.find("option").each(function(){c.div.append('<p id="'+c.settings._id+"_o_"+b(this).val()+'">'+b(this).text()+"</p>");if(b(this).attr("selected")){c.coolMultiple("select",b(this).val())}});c.div.find("p").click(function(){var d=b(this).attr("id").replace(c.settings._id+"_o_","");if(!b(this).hasClass("coolmulti-selected")){c.coolMultiple("select",d)}else{c.coolMultiple("deselect",d)}})},init_checkboxes:function(){var c=this;c.find('input[type="checkbox"]').each(function(){c.div.append('<p id="'+c.settings._id+"_o_"+b(this).val()+'">'+b(this).parent().text()+"</p>");if(b(this).attr("checked")){c.coolMultiple("select",b(this).val())}});c.div.find("p").click(function(){var d=b(this).attr("id").replace(c.settings._id+"_o_","");if(!b(this).hasClass("coolmulti-selected")){c.coolMultiple("select",d)}else{c.coolMultiple("deselect",d)}})},select:function(g){var d=this;if(d.settings.mode=="select"){var c="option"}else{if(d.settings.mode=="checkboxes"){var c="input"}}var e=d.find(c+'[value="'+g+'"]');if(d.settings.mode=="select"){e.attr("selected","selected");var f=e.text()}else{if(d.settings.mode=="checkboxes"){var f=e.parent().text();e.attr("checked","checked")}}b("p#"+d.settings._id+"_o_"+g).addClass("coolmulti-selected");d.values.append('<p id="'+d.settings._id+"_os_"+g+'">'+f+'<a class="coolmulti-del" href="#">'+d.settings.delText+"</a></p>").find("a").click(function(){d.coolMultiple("deselect",g);return false});d.values.find(".coolmulti-infotext").hide()},deselect:function(g){var d=this;if(d.settings.mode=="select"){var c="option"}else{if(d.settings.mode=="checkboxes"){var c="input"}}var e=d.find(c+'[value="'+g+'"]');if(d.settings.mode=="select"){e.attr("selected","");var f=e.text()}else{if(d.settings.mode=="checkboxes"){var f=e.parent().text();e.attr("checked","")}}b("p#"+d.settings._id+"_o_"+g).removeClass("coolmulti-selected");d.values.find("p#"+d.settings._id+"_os_"+g).remove();if(d.values.find("p").length==0){d.values.find(".coolmulti-infotext").show()}}};b.fn.coolMultiple=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{if(console.log){console.log("Method "+c+" does not exist on jQuery.coolMultiple")}}}return this}})(jQuery);