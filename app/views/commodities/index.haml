.grid_3

  =render :partial => 'shortcuts', :locals => { :page => :index }
  
  .box
    %h2
      %a#toggle-search Filter
    .block#search
      %h5 Name
      = render :partial => "/shared/search"
      %h5 Set
      %ul.menu
        - %w{ENC DEM POLL IMP EXP}.each do |tag|
          - c = "active" if tag==params[:set]
          %li= link_to tag, {:controller => "commodities", :set => tag}, :class => c
      = link_to "reset filter", commodities_path
      
  - if @last_visited.size > 0
    .box
      %h2 Last visited
      .block
      %p
        - @last_visited.each do |item|
          =link_to (h item.name), edit_commodity_path(item)
          %br

.grid_9

  .box
    %h2 Browse commodities
    %p
      %table(summary="Commodity list")
        %thead
          %tr
            %th Name
            %th Description
            %th
        %tbody
          - @commodities.each do |commodity|
            %tr{ :class => cycle('even', 'odd') }
              %td= link_to commodity.name, edit_commodity_path(commodity)
              %td= link_to truncate(commodity.description, :omission => "...", :length => 100), edit_commodity_path(commodity)
              %td= link_to 'Delete', commodity, :confirm => 'Are you sure?', :method => :delete
      = page_entries_info @commodities
      %br
      = will_paginate @commodities
      
.clear