.grid_3

  =render :partial => 'shortcuts', :locals => { :page => :index }
  
  .box
    %h2 Filter
    .block#search
      %h5 Name
      = render :partial => "/shared/search"
      %h5 Set
      %ul.menu
        - [["Energy carriers", "ENC"], ["Demands","DEM"], ["Pollutants","POLL"], ["Imports","IMP"], ["Exports","EXP"]].each do |tag|
          - c = "active" if tag[1]==params[:set]
          %li= link_to tag[0], {:controller => "commodities", :set => tag[1]}, :class => c
      = link_to "reset filter", commodities_path
      
  - if @last_visited.size > 0
    .box
      %h2 Last visited
      .block
      %p
        - @last_visited.each do |item|
          =link_to (h item.name), edit_commodity_path(item)
          %br

:javascript
  $(document).ready(function() {
  	$('#list_table').dataTable( {
  		"bProcessing": true,
  		"bServerSide": true,
  		"sAjaxSource": #{request.path.to_json}
  	} );
  } );

.grid_9

  .box
    %h2 Browse commodities
    %p
      %table(id="list_table" summary="Commodity list")
        %thead
          %th Name
          %th Description
          %th
        %tbody
          %tr
            %td(colspan="3" class="list_table_empty")
              Loading data
        %tfoot
          %th Name
          %th Description
          %th

  .box
    %h2 Browse commodities
    %p
      %table(summary="Commodity list")
        %thead
          %tr
            %th Name
            %th Description
            %th
        %tbody
          - @commodities.each do |commodity|
            %tr{ :class => cycle('even', 'odd') }
              %td= link_to commodity.name, edit_commodity_path(commodity)
              %td= link_to truncate(commodity.description, :omission => "...", :length => 100), edit_commodity_path(commodity)
              %td= link_to 'Delete', commodity, :confirm => 'Are you sure?', :method => :delete
      = page_entries_info @commodities
      %br
      = will_paginate @commodities
      
.clear