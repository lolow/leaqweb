- if @refresh
  :javascript
    setTimeout(function(){location.reload();}, 15000);
:javascript
  function import_res(new_output_path,id) {
    var sim_id = $('#sim_' +id+ ' option:selected')[0].value
    if(sim_id=="0"){
      location.href=new_output_path;
      return false;
    }
    $.blockUI({ message: '<b>Please wait...</b>',
      css: { border: 'none',
        padding: '15px',
        backgroundColor: '#000',
        opacity: .5,
        color: '#fff'
      }});
    location.href = '/outputs/' + sim_id + '/import?solver_id=' + id;
  }
.grid_3
  .box
    %h2 Shortcuts
    .block
      %p
        - if @solver.solved? && @solver.has_files?
          = link_to_function("import outputs into a resultset",
              "import_res(#{new_output_path.to_json},#{@solver.id})")
          = select_tag "sim_#{@solver.id}", options_for_select(@outputs.map {|o| [o.name,o.id]}+[['New...',0]])
        - else
          import outputs into a resultset
        %br
        = link_to("Reinit solver", @solver, :method=>:delete, :confirm => "Are you sure?")

.grid_9
  .box
    %h2
      ID: #{@solver.pid} -
      Status: #{@solver.current_state.name}
      - if @solver.solving?
        =  image_tag("solving.gif",:align=>:absmiddle,:height=>"9px")
    .block
      - if (@solver.solved? && @solver.has_files?)
        %p Total time resolution: (#{@solver.time_used} sec)
      #log
        %h5 Log
        #display_log
          - if (@solver.solved? && !@solver.has_files?)
            log file should have been deleted because of its age. Please reinit the solver
          %pre= raw log_with_link(sanitize @solver.log)