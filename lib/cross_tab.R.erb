library('reshape')
data <- read.table("<%= @output.file('csv') %>",sep=",",dec=".",h=TRUE)
data <- subset(data,attribute=="<%= @table[:attribute] %>")
<% if @table[:filter].size > 0 %>
data <- subset(data,<%= @table[:filter] %>)
<% end %>
data <- cast(data,<%= @table[:formula] %>,fun.aggregate=<%= @table[:aggregate] %>)
write.csv(data,file="<%= @output.file("tab") %>")